[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "EPPS 6302 Methods of Data Collection & Production",
    "section": "",
    "text": "Hello! My name is Nakir, and I am a PhD candidate in Geospatial Information Sciences at The University of Texas at Dallas.\nCurrently, I am working on cassava identification using UAV imagery.\nContact:\nðŸ“§ md.nakir.ahmed.09@gmail.com\nðŸ”— LinkedIn"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "assignment04_Nakir.html#assignment-04-web-scraping-cleaning",
    "href": "assignment04_Nakir.html#assignment-04-web-scraping-cleaning",
    "title": "Assignment 04",
    "section": "Assignment 04 â€“ Web Scraping & Cleaning",
    "text": "Assignment 04 â€“ Web Scraping & Cleaning"
  },
  {
    "objectID": "assignment04_Nakir.html",
    "href": "assignment04_Nakir.html",
    "title": "Assignment 04",
    "section": "",
    "text": "Scrape a Wiki table (Life Expectancy) and clean it\n\n############################################################\n## Assignment 04\n############################################################\n\n# 1. Libraries\nlibrary(tidyverse)\n\nâ”€â”€ Attaching core tidyverse packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 2.0.0 â”€â”€\nâœ” dplyr     1.1.4     âœ” readr     2.1.5\nâœ” forcats   1.0.0     âœ” stringr   1.5.1\nâœ” ggplot2   3.5.2     âœ” tibble    3.2.1\nâœ” lubridate 1.9.4     âœ” tidyr     1.3.1\nâœ” purrr     1.0.4     \nâ”€â”€ Conflicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€â”€\nâœ– dplyr::filter() masks stats::filter()\nâœ– dplyr::lag()    masks stats::lag()\nâ„¹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(rvest)\n\n\nAttaching package: 'rvest'\n\nThe following object is masked from 'package:readr':\n\n    guess_encoding\n\nlibrary(stringr)\n\n# 2. Target Page\nurl &lt;- \"https://en.wikipedia.org/wiki/List_of_countries_by_life_expectancy\"\npage &lt;- read_html(url)\n\n# 3. Grab all wikitables on the page\nall_tables &lt;- page |&gt;\n  html_elements(\"table.wikitable\") |&gt;\n  html_table(fill = TRUE)\n\nif (length(all_tables) == 0) stop(\"No .wikitable tables found.\")\n\n# 4. Helper functions\nnorm_names &lt;- function(x) {\n  x |&gt;\n    str_to_lower() |&gt;\n    str_replace_all(\"\\\\s+\", \"_\") |&gt;\n    str_replace_all(\"[^a-z0-9_]\", \"\")\n}\n\nscore_table &lt;- function(df) {\n  nms &lt;- norm_names(names(df))\n  has_country &lt;- any(str_detect(nms, \"country|territor|area|location|nation|state\"))\n  has_overall &lt;- any(str_detect(nms, \"overall|both|total|life_expectancy(.*)birth$|^life_expectancy$\"))\n  has_male &lt;- any(str_detect(nms, \"male\"))\n  has_female &lt;- any(str_detect(nms, \"female\"))\n  as.integer(has_country) + as.integer(has_overall) + as.integer(has_male) + as.integer(has_female)\n}\n\nstrip_notes &lt;- function(x) str_replace_all(x, \"\\\\[[^\\\\]]*\\\\]\", \"\") |&gt;\n  trimws()\nto_numeric &lt;- function(x) suppressWarnings(as.numeric(str_replace_all(x, \"[^0-9.]\", \"\")))\n\n# 5. Pick the best table automatically\nscores &lt;- purrr::map_int(all_tables, score_table)\nbest_idx &lt;- which.max(scores)\nif (scores[best_idx] == 0) stop(\"No table with required columns found.\")\nlife_df_raw &lt;- all_tables[[best_idx]]\n\ncat(\"Using table index:\", best_idx, \"out of\", length(all_tables), \"\\n\")\n\nUsing table index: 6 out of 6 \n\n# 6. Standardize column names\nnms &lt;- norm_names(names(life_df_raw))\nnames(life_df_raw) &lt;- nms\n\n# Locate core columns\ncol_country &lt;- names(life_df_raw)[str_detect(nms, \"country|territor|area|location|nation|state\")][1]\ncol_overall &lt;- names(life_df_raw)[str_detect(nms, \"overall|both|total|life_expectancy(.*)birth$|^life_expectancy$\")][1]\ncol_male &lt;- names(life_df_raw)[str_detect(nms, \"male\")][1]\ncol_female &lt;- names(life_df_raw)[str_detect(nms, \"female\")][1]\n\n# 7. Build clean dataset (no Rank/Date)\nlife_df_clean &lt;- tibble(\n  Country = strip_notes(as.character(life_df_raw[[col_country]])),\n  Overall_Years = to_numeric(life_df_raw[[col_overall]]),\n  Male_Years = to_numeric(life_df_raw[[col_male]]),\n  Female_Years = to_numeric(life_df_raw[[col_female]])\n) |&gt;\n  filter(!(is.na(Overall_Years) & is.na(Male_Years) & is.na(Female_Years))) |&gt;\n  arrange(Country)\n\n# 8. Preview\ncat(\"\\nClean dataset preview (top 10 rows):\\n\")\n\n\nClean dataset preview (top 10 rows):\n\nprint(head(life_df_clean, 10))\n\n# A tibble: 10 Ã— 4\n   Country    Overall_Years Male_Years Female_Years\n   &lt;chr&gt;              &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;\n 1 Argentina           75.4       72.2         78.6\n 2 Austria             81.1       78.8         83.5\n 3 Belgium             81.8       79.6         83.9\n 4 Brazil              72.8       69.6         76  \n 5 Bulgaria            74.3       70.8         78.1\n 6 Chile               81.2       78.5         84  \n 7 China               78.2       75.5         81.2\n 8 Colombia            76.9       73.8         80.1\n 9 Costa Rica          80.9       78.3         83.5\n10 Croatia             77.7       74.6         80.8\n\ncat(\"\\nStructure:\\n\")\n\n\nStructure:\n\nstr(life_df_clean)\n\ntibble [38 Ã— 4] (S3: tbl_df/tbl/data.frame)\n $ Country      : chr [1:38] \"Argentina\" \"Austria\" \"Belgium\" \"Brazil\" ...\n $ Overall_Years: num [1:38] 75.4 81.1 81.8 72.8 74.3 81.2 78.2 76.9 80.9 77.7 ...\n $ Male_Years   : num [1:38] 72.2 78.8 79.6 69.6 70.8 78.5 75.5 73.8 78.3 74.6 ...\n $ Female_Years : num [1:38] 78.6 83.5 83.9 76 78.1 84 81.2 80.1 83.5 80.8 ...\n\n# 9. Save to CSV\nwrite.csv(life_df_clean, \"life_expectancy_tidy.csv\", row.names = FALSE)\ncat(\"\\nSaved as 'life_expectancy_tidy.csv' in your working directory.\\n\")\n\n\nSaved as 'life_expectancy_tidy.csv' in your working directory."
  }
]